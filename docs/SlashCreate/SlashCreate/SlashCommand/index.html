<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>SlashCommand (SlashCreate.SlashCreate.SlashCommand)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../">Up</a> â€“ <a href="../../">SlashCreate</a> &#x00BB; <a href="../">SlashCreate</a> &#x00BB; SlashCommand</nav><h1>Module <code>SlashCreate.SlashCommand</code></h1></header><div class="spec module" id="module-Option"><a href="#module-Option" class="anchor"></a><code><span class="keyword">module</span> <a href="Option">Option</a>: { ... };</code></div><dl><dt class="spec external" id="val-opt"><a href="#val-opt" class="anchor"></a><code><span class="keyword">let</span> opt: <span>_type:<span>[ `sub_command <span>| `sub_command_group</span> <span>| `string</span> <span>| `integer</span> <span>| `boolean</span> <span>| `user</span> <span>| `channel</span> ]</span></span> <span>=&gt;</span> <span>name:string</span> <span>=&gt;</span> <span>description:string</span> <span>=&gt;</span> <span>?&#8288;options:array(<a href="Option#type-t">Option.t</a>)</span> <span>=&gt;</span> <span>?&#8288;choices:array(<a href="Option#type-choice">Option.choice</a>)</span> <span>=&gt;</span> <span>?&#8288;default:bool</span> <span>=&gt;</span> <span>?&#8288;required:bool</span> <span>=&gt;</span> unit <span>=&gt;</span> <a href="Option#type-t">Option.t</a>;</code></dt><dd><p>Helper to construct a <a href="Option#type-t"><code>Option.t</code></a>.</p></dd></dl><dl><dt class="spec type" id="type-params"><a href="#type-params" class="anchor"></a><code><span class="keyword">type</span> params</code>;</dt><dt class="spec type" id="type-throttlingParams"><a href="#type-throttlingParams" class="anchor"></a><code><span class="keyword">type</span> throttlingParams</code><code> = </code><code>{</code><table class="record"><tr id="type-throttlingParams.duration" class="anchored"><td class="def field"><a href="#type-throttlingParams.duration" class="anchor"></a><code>duration: int,</code></td></tr><tr id="type-throttlingParams.usages" class="anchored"><td class="def field"><a href="#type-throttlingParams.usages" class="anchor"></a><code>usages: int,</code></td></tr></table><code>}</code>;</dt></dl><dl><dt class="spec external" id="val-params"><a href="#val-params" class="anchor"></a><code><span class="keyword">let</span> params: <span>name:string</span> <span>=&gt;</span> <span>description:string</span> <span>=&gt;</span> <span>?&#8288;guildIDs:array(string)</span> <span>=&gt;</span> <span>?&#8288;options:array(<a href="Option#type-t">Option.t</a>)</span> <span>=&gt;</span> <span>?&#8288;requiredPermissions:array(string)</span> <span>=&gt;</span> <span>?&#8288;throttling:<a href="#type-throttlingParams">throttlingParams</a></span> <span>=&gt;</span> <span>?&#8288;unknown:bool</span> <span>=&gt;</span> unit <span>=&gt;</span> <a href="#type-params">params</a>;</code></dt><dd><p>Construct the options for a <a href="#type-t"><code>SlashCommand.t</code></a>; pass to <a href="#val-createWith"><code>createWith</code></a>.</p><dl><dt>parameter name</dt><dd><p>The name of the command.</p></dd></dl><dl><dt>parameter description</dt><dd><p>The description of the command.</p></dd></dl><dl><dt>parameter guildIDs</dt><dd><p>The guild ID(s) that this command will be assigned to.</p></dd></dl><dl><dt>parameter options</dt><dd><p>The command's options.</p></dd></dl><dl><dt>parameter requiredPermissions</dt><dd><p>The required permission(s) for this command.</p></dd></dl><dl><dt>parameter throttling</dt><dd><p>The throttling options for the command.</p></dd></dl><dl><dt>parameter unknown</dt><dd><p>Whether this command is used for unknown commands. messages.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-permission"><a href="#type-permission" class="anchor"></a><code><span class="keyword">type</span> permission</code>;</dt><dd><p>Abstract construct-only sum-type of <code>string</code> and <code>bool</code> for <a href="#type-t.hasPermission"><code>t.hasPermission</code></a> handlers to return.</p></dd></dl><dl><dt class="spec external" id="val-permissionOfBool"><a href="#val-permissionOfBool" class="anchor"></a><code><span class="keyword">let</span> permissionOfBool: bool <span>=&gt;</span> <a href="#type-permission">permission</a>;</code></dt><dd><p>Constructs an <a href="#type-t.hasPermission"><code>t.hasPermission</code></a> <a href="#type-permission"><code>permission</code></a> from a <code>bool</code>.</p></dd></dl><dl><dt class="spec external" id="val-permissionWithErrorMessage"><a href="#val-permissionWithErrorMessage" class="anchor"></a><code><span class="keyword">let</span> permissionWithErrorMessage: string <span>=&gt;</span> <a href="#type-permission">permission</a>;</code></dt><dd><p>Constructs an <a href="#type-t.hasPermission"><code>t.hasPermission</code></a> <a href="#type-permission"><code>permission</code></a> from a <code>string</code>.</p></dd></dl><dl><dt class="spec type" id="type-response"><a href="#type-response" class="anchor"></a><code><span class="keyword">type</span> response</code>;</dt><dd><p>Abstract construct-only sum-type of <code>string</code> and <a href="../Message#type-params"><code>Message.params</code></a> for <a href="#type-t.run"><code>t.run</code></a> handlers to return.</p></dd></dl><dl><dt class="spec external" id="val-responseOfString"><a href="#val-responseOfString" class="anchor"></a><code><span class="keyword">let</span> responseOfString: string <span>=&gt;</span> <a href="#type-response">response</a>;</code></dt><dd><p>Constructs an <a href="#type-t.run"><code>t.run</code></a> <a href="#type-response"><code>response</code></a> from a <code>string</code>.</p></dd></dl><dl><dt class="spec external" id="val-responseOfMsg"><a href="#val-responseOfMsg" class="anchor"></a><code><span class="keyword">let</span> responseOfMsg: <a href="../Message#type-params">Message.params</a> <span>=&gt;</span> <a href="#type-response">response</a>;</code></dt><dd><p>Constructs an <a href="#type-t.run"><code>t.run</code></a> <a href="#type-response"><code>response</code></a> from <a href="../Message#type-params"><code>Message.params</code></a>.</p></dd></dl><dl><dt class="spec type" id="type-onBlockHandler"><a href="#type-onBlockHandler" class="anchor"></a><code><span class="keyword">type</span> onBlockHandler</code><code> = <a href="../CommandContext#type-t">CommandContext.t</a> <span>=&gt;</span> string <span>=&gt;</span> Js.Json.t <span>=&gt;</span> unit</code>;</dt><dd><p>Type of handlers for <a href="#type-t.onBlock"><code>onBlock</code></a>.</p><dl><dt>parameter ctx</dt><dd><p>Command context the command is running from</p></dd></dl><dl><dt>parameter reason</dt><dd><p>Reason that the command was blocked (built-in reasons are <code>&quot;permission&quot;</code>, <code>&quot;throttling&quot;</code>)</p></dd></dl><dl><dt>parameter data</dt><dd><p>Additional data associated with the block.</p><ul><li>permission: <code>response</code> (<code>Json.JSONString</code>) to send</li><li>throttling: <code>throttle</code> (<code>Json.JSONObject</code>), <code>remaining</code> (<code>Json.JSONNumber</code>) time in seconds</li></ul></dd></dl></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.commandName" class="anchored"><td class="def field"><a href="#type-t.commandName" class="anchor"></a><code>commandName: string,</code></td><td class="doc"><p>The command's name.</p></td></tr><tr id="type-t.description" class="anchored"><td class="def field"><a href="#type-t.description" class="anchor"></a><code>description: string,</code></td><td class="doc"><p>The command's description.</p></td></tr><tr id="type-t.options" class="anchored"><td class="def field"><a href="#type-t.options" class="anchor"></a><code>options: array(<a href="Option#type-t">Option.t</a>),</code></td><td class="doc"><p>The options for the command.</p></td></tr><tr id="type-t.guildIDs" class="anchored"><td class="def field"><a href="#type-t.guildIDs" class="anchor"></a><code>guildIDs: array(string),</code></td><td class="doc"><p>The guild ID(s) for the command.</p></td></tr><tr id="type-t.requiredPermissions" class="anchored"><td class="def field"><a href="#type-t.requiredPermissions" class="anchor"></a><code>requiredPermissions: array(string),</code></td><td class="doc"><p>The permissions required to use this command.</p></td></tr><tr id="type-t.throttling" class="anchored"><td class="def field"><a href="#type-t.throttling" class="anchor"></a><code>throttling: <a href="#type-throttlingParams">throttlingParams</a>,</code></td><td class="doc"><p>The throttling options for this command.</p></td></tr><tr id="type-t.unknown" class="anchored"><td class="def field"><a href="#type-t.unknown" class="anchor"></a><code>unknown: bool,</code></td><td class="doc"><p>Whether this command is used for unknown commands.</p></td></tr><tr id="type-t.filePath" class="anchored"><td class="def field"><a href="#type-t.filePath" class="anchor"></a><code><span class="keyword">mutable</span> filePath: Js.undefined(string),</code></td><td class="doc"><p>The file path of the command. Used for refreshing the require cache.</p><p>Set this to <code>__filename</code> in the constructor to enable cache clearing:</p><pre><code class="ml">external __filename : string = &quot;__filename&quot; [@@bs.val]
command.filePath &lt;- Js.Undefined.return __filename ;</code></pre></td></tr><tr id="type-t.creator" class="anchored"><td class="def field"><a href="#type-t.creator" class="anchor"></a><code>creator: <a href="../SlashCreator#type-t">SlashCreator.t</a>,</code></td><td class="doc"><p>The creator responsible for this command.</p></td></tr><tr id="type-t.hasPermission" class="anchored"><td class="def field"><a href="#type-t.hasPermission" class="anchor"></a><code><span class="keyword">mutable</span> hasPermission: <a href="../CommandContext#type-t">CommandContext.t</a> <span>=&gt;</span> <a href="#type-permission">permission</a>,</code></td><td class="doc"><p>Checks whether the context member has permission to use the command.</p><dl><dt>parameter ctx</dt><dd><p>The triggering context</p></dd></dl><dl><dt>returns</dt><dd><p>permission Whether the member has permission, or an error message to respond with if they don't</p></dd></dl></td></tr><tr id="type-t.onBlock" class="anchored"><td class="def field"><a href="#type-t.onBlock" class="anchor"></a><code><span class="keyword">mutable</span> onBlock: <a href="#type-onBlockHandler">onBlockHandler</a>,</code></td><td class="doc"><p>Called when the command is prevented from running; you probably want to use <a href="#val-wrapOnBlockHandler"><code>wrapOnBlockHandler</code></a>.</p></td></tr><tr id="type-t.onError" class="anchored"><td class="def field"><a href="#type-t.onError" class="anchor"></a><code><span class="keyword">mutable</span> onError: Js.Exn.t <span>=&gt;</span> <a href="../CommandContext#type-t">CommandContext.t</a> <span>=&gt;</span> unit,</code></td><td class="doc"><p>Called when the command produces an error while running.</p><dl><dt>parameter err</dt><dd><p>Error that was thrown</p></dd></dl><dl><dt>parameter ctx</dt><dd><p>Command context the command is running from</p></dd></dl></td></tr><tr id="type-t.run" class="anchored"><td class="def field"><a href="#type-t.run" class="anchor"></a><code><span class="keyword">mutable</span> run: <a href="../CommandContext#type-t">CommandContext.t</a> <span>=&gt;</span> Js.Promise.t(Js.undefined(<a href="#type-response">response</a>)),</code></td><td class="doc"><p>Runs the command.</p><dl><dt>parameter ctx</dt><dd><p>The context of the interaction</p></dd></dl></td></tr></table><code>}</code>;</dt></dl><dl><dt class="spec external" id="val-createWith"><a href="#val-createWith" class="anchor"></a><code><span class="keyword">let</span> createWith: <a href="#type-params">params</a> <span>=&gt;</span> <a href="#type-t">t</a>;</code></dt><dd><p>Construct a <a href="#type-t"><code>SlashCommand.t</code></a>; accepts options constructed by <a href="#val-params"><code>params</code></a>.</p></dd></dl><dl><dt class="spec type" id="type-throttleStatus"><a href="#type-throttleStatus" class="anchor"></a><code><span class="keyword">type</span> throttleStatus</code><code> = </code><code>{</code><table class="record"><tr id="type-throttleStatus.throttle" class="anchored"><td class="def field"><a href="#type-throttleStatus.throttle" class="anchor"></a><code>throttle: <a href="#type-throttlingParams">throttlingParams</a>,</code></td></tr><tr id="type-throttleStatus.remaining" class="anchored"><td class="def field"><a href="#type-throttleStatus.remaining" class="anchor"></a><code>remaining: int,</code></td></tr></table><code>}</code>;</dt><dt class="spec type" id="type-strictOnBlockHandler"><a href="#type-strictOnBlockHandler" class="anchor"></a><code><span class="keyword">type</span> strictOnBlockHandler</code><code> = <a href="../CommandContext#type-t">CommandContext.t</a> <span>=&gt;</span> <span>[ <span>`permission<span>(string)</span></span> <span><span>| `throttling</span><span>(<a href="#type-throttleStatus">throttleStatus</a>)</span></span> ]</span> <span>=&gt;</span> unit</code>;</dt><dd><p>Strongly-typed version of the <a href="#type-t.onBlock"><code>t.onBlock</code></a> handler.</p></dd></dl><dl><dt class="spec value" id="val-wrapOnBlockHandler"><a href="#val-wrapOnBlockHandler" class="anchor"></a><code><span class="keyword">let</span> wrapOnBlockHandler: <a href="#type-strictOnBlockHandler">strictOnBlockHandler</a> <span>=&gt;</span> <a href="#type-onBlockHandler">onBlockHandler</a>;</code></dt><dd><p>Wraps a strongly-typed handler to set <a href="#type-t.onBlock"><code>t.onBlock</code></a> with.</p></dd></dl></div></body></html>